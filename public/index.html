<!DOCTYPE html>
<html>
<head>
  <title>NET-A-PORTER webdev test</title>
  <script>
    var page = 0;

    function get8products(page) {
      const offset = (page || 0) * 8;
      const limit = 8;
      return fetch('http://localhost:3000/api/products?offset=' + offset + '&limit=' + limit).then(
        function(response) {
          return response.json();
        }).then(function(data) {
          return data;
        });
    }

    function displayProducts() {
      get8products(page).then(function(response) {
        clearProducts();
        const products = response.data || [];
        products.forEach(function(product) {
          const productsListDomElement = document.getElementById('products');
          const productDomElement = document.createElement('article');
          const productName = product.name || '{product name not found}';
          const productImageUrl = product.image.outfit;
          const productImage = document.createElement('img');
          productImage.src = productImageUrl;
          const productNameTextNode = document.createTextNode(productName)
          productDomElement.appendChild(productImage);
          productDomElement.appendChild(productNameTextNode);
          productsListDomElement.appendChild(productDomElement);
        });
      });
    }

    function clearProducts() {
      document.getElementById('products').innerHTML = ''; // better way to do this?
    }

    function nextPage() {
      page = page + 1;
      displayProducts();
    }

    function previousPage() {
      if (page === 0) {
        return;
      } else {
        page = page - 1;
        displayProducts();
      }
    }

    displayProducts();

  </script>
  <style>

  </style>
</head>
<body>
  <h1>NET A PORTER</h1>
  <h2>What's New</h2>
  <button onclick="previousPage()">Previous</button>
  <button onclick="nextPage()">Next</button>
  <section id='products' class='products'>

  </section>
</body>
</html>
